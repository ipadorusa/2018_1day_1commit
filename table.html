<!doctype html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        html,body,header,nav,aside,main,article,section,footer,h1,h2,h3,h4,ul,ol,li,dl,dt,dd,p,em,address,blockquote,q,form,fieldset,input,textarea,select,button,iframe{margin:0;padding:0}body{line-height:1}header,nav,aside,main,article,section,footer{display:block}input,textarea,select,button{border-radius:0;box-sizing:border-box;font-family:inherit}ul,ol{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:""}img,fieldset,iframe{border:none}hr{display:none}table{border-collapse:collapse;border-spacing:0}em,address{font-style:normal}a{text-decoration:none}button{border:none;border-radius:0;background:none;cursor:pointer}input[type=text]::-ms-clear{display:none}

        .table {table-layout:fixed;}
        .table thead th {position:relative;font-size:13px;height:30px;border-top:1px solid #ddd;border-bottom:1px solid #ddd;border-right:1px solid #ddd}
        .table thead th.on:after {position:absolute;top:0;left:0;width:100%;height:2px;background:#308b12;content:'';display:inline-block;}
        .table thead th:first-child {border-left:1px solid #ddd}
        .table tbody td {padding:3px 0 3px 7px;position:relative;border-bottom:1px solid #ddd;border-top:1px solid #ddd;border-right:1px solid #ddd;color:#222;font-size:13px;text-align:left;cursor:pointer}
        .table tbody td:nth-child(2) {text-align:center;padding-left:0}
        .table tbody th {position:relative;border-left:1px solid #ddd;border-bottom:1px solid #ddd;border-right:1px solid #ddd}
        .table tbody th.on:after {position:absolute;top:0;left:0;width:2px;height:100%;background:#308b12;content:'';display:inline-block;}
        .table tbody td .data_txt.on:after {border:1px solid #308b12;width:100%;height:100%;position: absolute;top:-1px;left:-1px;content:'';display:block;}
        .table tbody td .data_txt.on:before {position:absolute;right:-2px;bottom:-2px;display:inline-block;width:4px;height:4px;background:#308b12;content:''}
        .table tbody td .table_input {border:0;font-size:inherit;color:inherit;text-align:inherit}
    </style>
</head>
<body>
<div id="app">
    <button type="button" class="btn_create">생성생성생성</button>
    <br><br><br><br>
    <table class="table" id="load_table">
        <colgroup>
            <col style="width:43px">
            <col style="width:54px">
            <col style="width:152px">
            <col style="width:150px">
            <col style="width:150px">
        </colgroup>
        <thead>
        <tr>
            <th scope="col">번호</th>
            <th scope="col">
                <span class="adm_chk">
                    <input type="checkbox" id="chk1">
                    <label class="lbl" for="chk1"></label>
                </span>
            </th>
            <th scope="col">이름</th>
            <th scope="col">지원분야</th>
            <th scope="col">휴대폰 번호</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <th scope="row">1</th>
            <td>
                <span class="adm_chk">
                    <input type="checkbox" id="chk2">
                    <label class="lbl" for="chk2"></label>
                </span>
            </td>
            <td>
                <div class="data_txt">홍길동</div>
            </td>
            <td>
                <div class="data_txt">기획</div>
            </td>
            <td>
                <div class="data_txt">010-5171-8377</div>
            </td>
        </tr>
        <tr>
            <th scope="row">2</th>
            <td>
                <span class="adm_chk">
                    <input type="checkbox" id="chk2">
                    <label class="lbl" for="chk2"></label>
                </span>
            </td>
            <td>
                <div class="data_txt">홍길동</div>
            </td>
            <td>
                <div class="data_txt">기획</div>
            </td>
            <td>
                <div class="data_txt">010-5171-8377</div>
            </td>
        </tr>
        <tr>
            <th scope="row">3</th>
            <td>
                <span class="adm_chk">
                    <input type="checkbox" id="chk2">
                    <label class="lbl" for="chk2"></label>
                </span>
            </td>
            <td>
                <div class="data_txt">홍길동</div>
            </td>
            <td>
                <div class="data_txt">기획</div>
            </td>
            <td>
                <div class="data_txt">010-5171-8377</div>
            </td>
        </tr>
        <tr>
            <th scope="row">4</th>
            <td>
                <span class="adm_chk">
                    <input type="checkbox" id="chk2">
                    <label class="lbl" for="chk2"></label>
                </span>
            </td>
            <td>
                <div class="data_txt">홍길동</div>
            </td>
            <td>
                <div class="data_txt">기획</div>
            </td>
            <td>
                <div class="data_txt">010-5171-8377</div>
            </td>
        </tr>
        </tbody>
    </table>
</div>
<script src="quickES.js"></script>
<script>
	const removeClass = (el, className) => {
		const sections = selAll(el);
		for (let i=0;i<sections.length;i++){
			sections[i].classList.remove(className);
		}
	};

	const makeInput = (container, txt) => {
		const input = document.createElement('input');
		input.type = "text";
		input.className = 'table_input';
		input.value = txt;
		input.autofocus = true;
		container.appendChild(input);
	};

	const tableFocusEvt = (e) => {
		const target = e.target;
		const selectTh = target.closest('tr').querySelector('th');
		const theadTh = document.getElementById('load_table').querySelectorAll('thead th');
		let cellIdx = e.path[1].cellIndex;
		removeClass('#load_table thead th, #load_table tbody .data_txt, #load_table tbody th', 'on');
		theadTh[cellIdx].classList.add('on');
		e.target.classList.add('on');
		selectTh.classList.add('on');
    };

    addEvent('click', '#load_table .data_txt', (e) => {
    	e.preventDefault();
        tableFocusEvt(e);
    });

	addEvent('dblclick', '#load_table .data_txt', (e) => {
		let dataTxt = e.target.textContent;
	    e.target.textContent = '';
		makeInput(e.target, dataTxt);
    });


</script>
</body>
</html>
